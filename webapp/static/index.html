<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PairWiseAlignmentViz</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="top-row">
        <section class="panel">
          <h2>Data Selection</h2>
          <label>Choose alignment FASTA
            <div class="path-row">
              <input id="input_path" type="text" placeholder="/path/to/alignment.fasta" />
              <button type="button" data-browse="input_path">Browse</button>
            </div>
          </label>
          <label>Choose reference annotation
            <div class="path-row">
              <input id="reference_annotation_path" type="text" placeholder="/path/to/reference_annotation.txt" />
              <button type="button" data-browse="reference_annotation_path">Browse</button>
            </div>
          </label>
          <label>Choose query annotation
            <div class="path-row">
              <input id="query_annotation_path" type="text" placeholder="/path/to/query_annotation.txt" />
              <button type="button" data-browse="query_annotation_path">Browse</button>
            </div>
          </label>
        </section>

        <section class="panel">
          <h2>User Input Parameters</h2>
          <div class="grid two">
            <label>Width
              <input id="width" type="text" value="auto" />
            </label>
            <label>Height
              <input id="height" type="number" step="0.1" value="6.0" />
            </label>
            <label>DPI
              <input id="dpi" type="number" step="1" value="150" />
            </label>
            <label>Tick interval
              <input id="tick_interval" type="number" step="1" value="10000" />
            </label>
          </div>

          <details>
            <summary>Advanced Parameters</summary>
            <div class="grid two">
              <label>Min gap size<input id="min_gap_size" type="number" value="10" /></label>
              <label>Block size<input id="block_size" type="number" value="100" /></label>
              <label>Min sequence identity<input id="min_sequence_identity" type="number" step="0.01" value="0.7" /></label>
              <label>Window size<input id="window_size" type="number" value="20" /></label>
              <label>Backbone gap<input id="backbone_gap" type="number" step="0.1" value="1.0" /></label>
              <label>Backbone thickness<input id="backbone_thickness" type="number" step="0.1" value="2.0" /></label>
              <label>Bump scale<input id="bump_scale" type="number" step="0.1" value="1.0" /></label>
              <label>Mismatch line width<input id="mismatch_line_width" type="number" step="0.1" value="1.2" /></label>
              <label>Gap max height<input id="gap_max_height" type="number" step="0.01" value="0.8" /></label>
              <label>Gap width<input id="gap_width" type="number" step="0.01" value="0.0" /></label>
              <label>Gap height scale<input id="gap_height_scale" type="number" step="0.01" value="0.04" /></label>
              <label>Indel height scale<input id="indel_height_scale" type="number" step="0.01" value="0.04" /></label>
              <label>Gap label size (or NULL)<input id="gap_label_size" type="text" value="8.0" /></label>
              <label>Annotation label size (or NULL)<input id="annotation_label_size" type="text" value="10.0" /></label>
              <label>Annotation thickness<input id="annotation_thickness" type="number" step="0.1" value="4.0" /></label>
              <label>Annotation alpha<input id="annotation_alpha" type="number" step="0.01" value="0.85" /></label>
              <label>Reference annotation color<input id="reference_annotation_color" type="text" value="#984ea3" /></label>
              <label>Query annotation color<input id="query_annotation_color" type="text" value="#ff7f00" /></label>
              <label>Annotation label jitter<input id="annotation_label_jitter" type="number" step="0.01" value="0.35" /></label>
              <label>Annotation max layers<input id="annotation_max_layers" type="number" value="3" /></label>
              <label>Annotation spacing<input id="annotation_spacing" type="number" step="0.1" value="0.8" /></label>
            </div>
          </details>

          <div class="actions">
            <button id="render_btn" type="button">Render</button>
          </div>
        </section>

        <section class="panel compact" id="probe_summary">
          <h2>Base Pair Probe</h2>
          <div>Reference base: <strong id="probe_ref_base">-</strong></div>
          <div>Query base: <strong id="probe_query_base">-</strong></div>
          <div>Reference local: <span id="probe_ref_pos">-</span></div>
          <div>Query local: <span id="probe_query_pos">-</span></div>
          <div>Column index: <span id="probe_idx">-</span></div>
          <div>Flags: <span id="probe_flags">-</span></div>
        </section>
      </header>

      <section class="viewer-wrap">
        <h2>Alignment Visualization Output</h2>
        <div id="viewer" class="viewer"></div>
      </section>

      <section class="controls-row">
        <div class="panel wide">
          <h2>Scroll / Viewport</h2>
          <div class="grid three">
            <label>Window width (global-x)
              <input id="viewport_width" type="number" min="1" value="2000" />
            </label>
            <label>Viewport start
              <input id="viewport_start" type="range" min="0" max="0" value="0" />
            </label>
            <label>Probe x (within viewport)
              <input id="probe_slider" type="range" min="0" max="1000" value="0" />
            </label>
          </div>
        </div>

        <div class="panel compact">
          <h2>Export Figure</h2>
          <button id="export_svg" type="button">Download SVG</button>
          <button id="export_png" type="button">Download PNG</button>
          <pre id="status"></pre>
        </div>
      </section>
    </div>

    <input id="file_picker" type="file" hidden />
    <script src="/static/app.js"></script>
  </body>
</html>
