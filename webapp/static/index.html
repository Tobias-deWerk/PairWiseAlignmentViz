<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PairWiseAlignmentViz</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="app-header">
        <div class="app-title-wrap">
          <h1>PairWiseAlignmentViz</h1>
          <p>Interactive pairwise alignment exploration and sequence extraction.</p>
        </div>
      </header>

      <div class="brand-watermark" aria-hidden="true"></div>

      <section class="viewer-wrap">
        <h2>Alignment Visualization Output</h2>
        <div id="viewer" class="viewer"></div>
      </section>

      <section class="controls-grid">
        <section class="panel compact panel-data">
          <h2>Data Selection</h2>
          <label>Choose alignment FASTA
            <div class="path-row">
              <input id="input_path" type="text" placeholder="/path/to/alignment.fasta" />
              <button type="button" data-browse="input_path">Browse</button>
            </div>
          </label>
          <label>Choose reference annotation
            <div class="path-row">
              <input id="reference_annotation_path" type="text" placeholder="/path/to/reference_annotation.txt" />
              <button type="button" data-browse="reference_annotation_path">Browse</button>
            </div>
          </label>
          <label>Choose query annotation
            <div class="path-row">
              <input id="query_annotation_path" type="text" placeholder="/path/to/query_annotation.txt" />
              <button type="button" data-browse="query_annotation_path">Browse</button>
            </div>
          </label>
          <label class="checkbox-row">
            <input id="swap_roles" type="checkbox" />
            <span>Swap query/reference roles</span>
          </label>
        </section>

        <section class="panel compact panel-probe" id="probe_summary">
          <h2>Position</h2>
          <div>Reference base: <strong id="probe_ref_base">-</strong></div>
          <div>Query base: <strong id="probe_query_base">-</strong></div>
          <div>Reference local: <span id="probe_ref_pos">-</span></div>
          <div>Query local: <span id="probe_query_pos">-</span></div>
          <hr class="probe-divider" />
          <div class="selection-actions">
            <button id="extract_query_btn" type="button" disabled>Extract Query Sequence</button>
            <button id="extract_reference_btn" type="button" disabled>Extract Reference Sequence</button>
            <button id="clear_selection_btn" type="button">Clear Selection</button>
          </div>
          <label class="output-label" for="extract_output">Extract Output</label>
          <textarea id="extract_output" readonly rows="7" placeholder="FASTA output appears here."></textarea>
          <button id="copy_extract_btn" type="button" disabled>Copy Output</button>
        </section>

        <section class="panel compact panel-params">
          <h2>User Input Parameters</h2>
          <div class="grid two">
            <label>Render preset
              <select id="render_preset">
                <option value="auto">Auto (by sequence length)</option>
                <option value="short_lt_5000">Short alignment (&lt; 5,000 bases)</option>
                <option value="long_ge_5000">Long alignment (&gt;= 5,000 bases / current defaults)</option>
              </select>
            </label>
            <label>Width
              <input id="width" type="text" value="auto" />
            </label>
            <label>Height
              <input id="height" type="number" step="0.1" value="6.0" />
            </label>
            <label>DPI
              <input id="dpi" type="number" step="1" value="150" />
            </label>
            <label>Tick interval
              <input id="tick_interval" type="number" step="1" value="10000" />
            </label>
          </div>
          <p class="preset-helper" id="preset_helper">Preset: Auto (resolve on render)</p>

          <details>
            <summary>Advanced Parameters</summary>
            <div class="grid two">
              <label>Min gap size<input id="min_gap_size" type="number" value="10" /></label>
              <label>Block size<input id="block_size" type="number" value="100" /></label>
              <label>Min sequence identity<input id="min_sequence_identity" type="number" step="0.01" value="0.7" /></label>
              <label>Window size<input id="window_size" type="number" value="20" /></label>
              <label>Backbone gap<input id="backbone_gap" type="number" step="0.1" value="0.5" /></label>
              <label>Backbone thickness<input id="backbone_thickness" type="number" step="0.1" value="3.0" /></label>
              <label>Bump scale<input id="bump_scale" type="number" step="0.1" value="0.3" /></label>
              <label>Mismatch line width<input id="mismatch_line_width" type="number" step="0.1" value="0.4" /></label>
              <label>Gap max height<input id="gap_max_height" type="number" step="0.01" value="2.0" /></label>
              <label>Gap width<input id="gap_width" type="number" step="0.01" value="50" /></label>
              <label>Gap height scale<input id="gap_height_scale" type="number" step="0.001" value="0.001" /></label>
              <label>Indel height scale<input id="indel_height_scale" type="number" step="0.01" value="0.01" /></label>
              <label>Gap label size (or NULL)<input id="gap_label_size" type="text" value="NULL" /></label>
              <label>Annotation label size (or NULL)<input id="annotation_label_size" type="text" value="10.0" /></label>
              <label>Annotation thickness<input id="annotation_thickness" type="number" step="0.1" value="10.0" /></label>
              <label>Annotation alpha<input id="annotation_alpha" type="number" step="0.01" value="0.85" /></label>
              <label>Reference annotation color<input id="reference_annotation_color" type="text" value="#984ea3" /></label>
              <label>Query annotation color<input id="query_annotation_color" type="text" value="#ff7f00" /></label>
              <label>Annotation label jitter<input id="annotation_label_jitter" type="number" step="0.1" value="20.0" /></label>
              <label>Annotation max layers<input id="annotation_max_layers" type="number" value="3" /></label>
              <label>Annotation spacing<input id="annotation_spacing" type="number" step="0.1" value="0.8" /></label>
            </div>
          </details>

          <div class="actions">
            <button id="render_btn" type="button">Render</button>
          </div>

          <h3 class="export-title">Export Figure</h3>
          <div class="export-actions">
            <button id="export_svg" type="button">Download SVG</button>
            <button id="export_png" type="button">Download PNG</button>
          </div>
          <pre id="status"></pre>
        </section>
      </section>

      <footer class="app-disclaimer">
        Built by Tobias de Werk <span aria-hidden="true">â€¢</span> Powered by OpenAI Codex
      </footer>
    </div>

    <input id="file_picker" type="file" hidden />
    <script src="/static/app.js"></script>
  </body>
</html>
