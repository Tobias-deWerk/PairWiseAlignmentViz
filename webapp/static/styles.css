:root {
  --brand-red: #c5192d;
  --brand-red-soft: #efd4d8;
  --bg-0: #f6f8fb;
  --bg-1: #ebeff5;
  --bg-2: #dce4ee;
  --panel: #ffffff;
  --panel-muted: #f8fafd;
  --text-main: #1a2733;
  --text-subtle: #526377;
  --text-on-dark: #f4f8fc;
  --border: #c9d4e2;
  --border-strong: #adbccf;
  --shadow: 0 16px 40px rgba(14, 25, 40, 0.08);
  --shadow-soft: 0 8px 20px rgba(14, 25, 40, 0.07);
  --focus: rgba(197, 25, 45, 0.3);
}

* {
  box-sizing: border-box;
}

html,
body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

body {
  margin: 0;
  color: var(--text-main);
  font-family: "IBM Plex Sans", "Segoe UI", sans-serif;
  background:
    radial-gradient(1200px 720px at 102% 4%, rgba(197, 25, 45, 0.08), transparent 52%),
    radial-gradient(1000px 600px at -12% 108%, rgba(27, 86, 126, 0.08), transparent 44%),
    linear-gradient(165deg, var(--bg-0) 0%, var(--bg-1) 56%, var(--bg-2) 100%);
}

.page {
  position: relative;
  width: 100%;
  max-width: 100%;
  padding: 18px;
  display: grid;
  gap: 14px;
  isolation: isolate;
}

.app-header {
  background: linear-gradient(145deg, #ffffff 0%, #f8fbff 100%);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow-soft);
  padding: 14px 16px;
}

.app-title-wrap h1 {
  margin: 0;
  color: #12202d;
  letter-spacing: -0.02em;
  font-size: clamp(1.15rem, 0.98rem + 0.72vw, 1.65rem);
  line-height: 1.2;
}

.app-title-wrap p {
  margin: 6px 0 0;
  color: var(--text-subtle);
  font-size: 0.9rem;
}

.brand-watermark {
  position: absolute;
  right: clamp(16px, 2vw, 28px);
  bottom: clamp(58px, 5vw, 86px);
  width: clamp(220px, 24vw, 340px);
  height: clamp(68px, 8vw, 112px);
  pointer-events: none;
  user-select: none;
  z-index: 0;
  opacity: 0.13;
  background-image: url("/static/assets/radboud-watermark.png"), url("/static/assets/radboud-watermark.svg");
  background-repeat: no-repeat;
  background-size: contain;
  background-position: right bottom;
}

.controls-grid {
  position: relative;
  z-index: 1;
  display: grid;
  gap: 12px;
  grid-template-columns: minmax(220px, 1fr) minmax(300px, 1.05fr) minmax(340px, 1.25fr);
  align-items: start;
}

.controls-grid > *,
.viewer-wrap,
.panel,
.viewer {
  min-width: 0;
}

.panel {
  background: linear-gradient(160deg, var(--panel) 0%, var(--panel-muted) 100%);
  color: var(--text-main);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-soft);
  padding: 12px;
  border-radius: 14px;
}

.panel.compact {
  align-self: start;
}

.panel-data,
.panel-probe,
.panel-params {
  height: fit-content;
}

.panel h2 {
  margin: 0 0 10px;
  color: #11202d;
  font-size: 1.05rem;
  letter-spacing: -0.01em;
}

.panel h3 {
  margin: 10px 0 7px;
  font-size: 0.9rem;
  color: #1f3140;
}

label {
  display: block;
  margin-bottom: 8px;
  font-size: 0.83rem;
  color: #334a5f;
}

input,
button,
summary,
textarea {
  font: inherit;
}

input[type="text"],
input[type="number"],
#extract_output {
  width: 100%;
  border: 1px solid var(--border-strong);
  border-radius: 10px;
  padding: 7px 9px;
  background: #ffffff;
  color: #102332;
  font-size: 0.88rem;
  transition: border-color 120ms ease, box-shadow 120ms ease;
}

input[type="range"] {
  width: 100%;
}

input[type="text"]:focus-visible,
input[type="number"]:focus-visible,
#extract_output:focus-visible,
button:focus-visible,
summary:focus-visible {
  outline: none;
  border-color: var(--brand-red);
  box-shadow: 0 0 0 3px var(--focus);
}

button {
  border: 1px solid #bfccd9;
  background: linear-gradient(165deg, #ffffff 0%, #f0f4f9 100%);
  color: #1c3040;
  border-radius: 10px;
  padding: 7px 10px;
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease, background-color 120ms ease;
}

button:hover {
  background: #f7fafc;
  box-shadow: 0 5px 14px rgba(14, 25, 40, 0.1);
  transform: translateY(-1px);
}

button:active {
  transform: translateY(0);
}

button:disabled {
  cursor: not-allowed;
  opacity: 0.58;
  box-shadow: none;
  transform: none;
}

#render_btn,
#export_svg,
#export_png,
#extract_query_btn,
#extract_reference_btn,
#copy_extract_btn {
  border-color: #d6a7ae;
}

#render_btn {
  background: linear-gradient(165deg, #d8283f 0%, var(--brand-red) 100%);
  border-color: #a7172a;
  color: var(--text-on-dark);
}

#render_btn:hover {
  background: linear-gradient(165deg, #e23a4f 0%, #ba1025 100%);
}

.path-row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 6px;
}

.grid {
  display: grid;
  gap: 7px;
}

.grid.two {
  grid-template-columns: repeat(2, minmax(150px, 1fr));
}

.grid.three {
  grid-template-columns: repeat(3, minmax(150px, 1fr));
}

.actions {
  margin-top: 9px;
  display: flex;
  gap: 7px;
  align-items: center;
  flex-wrap: wrap;
}

details {
  margin-top: 8px;
  padding-top: 4px;
}

details summary {
  cursor: pointer;
  margin-bottom: 7px;
  font-size: 0.86rem;
  font-weight: 600;
  color: #233445;
}

.viewer-wrap {
  position: relative;
  z-index: 1;
  border: 1px solid var(--border);
  background: linear-gradient(160deg, #ffffff 0%, #f8fbff 100%);
  box-shadow: var(--shadow);
  padding: 11px;
  border-radius: 16px;
}

.viewer-wrap h2 {
  margin: 0 0 8px;
  font-size: 1.03rem;
  color: #152738;
}

.viewer {
  min-height: 420px;
  max-height: 72vh;
  width: 100%;
  overflow-x: auto;
  overflow-y: auto;
  contain: layout paint;
  border: 1px solid #c4d2e0;
  border-radius: 10px;
  background: #ffffff;
}

.viewer svg {
  display: block;
  width: auto;
  height: auto;
  max-width: none;
}

#status {
  white-space: pre-wrap;
  font-size: 0.76rem;
  min-height: 4em;
  margin: 8px 0 0;
  color: #243a4c;
}

.probe-divider {
  border: 0;
  border-top: 1px solid #d2dce7;
  margin: 9px 0;
}

.selection-actions {
  margin-top: 8px;
  display: grid;
  gap: 6px;
}

.output-label {
  margin-top: 8px;
  font-size: 0.82rem;
  font-weight: 600;
  color: #263b4e;
}

#extract_output {
  margin-top: 5px;
  font-family: "IBM Plex Mono", "SFMono-Regular", Menlo, monospace;
  font-size: 0.72rem;
  line-height: 1.3;
  resize: vertical;
  min-height: 7.4em;
}

#copy_extract_btn {
  margin-top: 6px;
}

.export-title {
  margin-top: 10px;
}

.export-actions {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.app-disclaimer {
  position: relative;
  z-index: 1;
  border-top: 1px solid #ccd7e4;
  padding-top: 8px;
  color: #5d6f82;
  font-size: 0.78rem;
  letter-spacing: 0.01em;
}

@media (max-width: 1320px) {
  .controls-grid {
    grid-template-columns: minmax(240px, 1fr) minmax(320px, 1.2fr);
  }

  .panel-data {
    grid-column: 1;
  }

  .panel-probe {
    grid-column: 2;
  }

  .panel-params {
    grid-column: 1 / span 2;
  }
}

@media (max-width: 1120px) {
  .page {
    padding: 14px;
    gap: 12px;
  }

  .controls-grid,
  .grid.three,
  .grid.two {
    grid-template-columns: 1fr;
  }

  .panel-data,
  .panel-probe,
  .panel-params {
    grid-column: auto;
  }

  .viewer {
    min-height: 320px;
    max-height: 62vh;
  }

  .brand-watermark {
    width: 190px;
    height: 62px;
    right: 12px;
    bottom: 56px;
    opacity: 0.08;
  }
}
